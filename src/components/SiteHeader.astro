---
import { wordFinders, dailyGameHints, wordLists, wordsByLength } from '@/lib/nav-links';
---
<header class="site-header">
  <div class="site-header-inner container mx-auto flex h-16 items-center justify-between gap-4">
    <a href="/" class="header-logo flex items-center gap-3 rounded-md transition-shadow hover:opacity-90 shrink-0" aria-label="Word Unscrambler Home">
      <div class="logo-box">W</div>
      <div class="hidden sm:block">
        <div class="font-bold text-lg leading-none text-foreground">Word Unscrambler</div>
        <div class="text-xs text-muted-foreground">Solve any word game</div>
      </div>
    </a>

    <nav class="nav-desktop items-center gap-1" role="navigation" aria-label="Main navigation">
      <div class="nav-dropdown">
        <details>
          <summary class="nav-trigger">Word Finders</summary>
          <div class="nav-panel">
            <h3>Word Finders</h3>
            <div class="grid-2">
              {wordFinders.map((item) => (
                <a href={item.href}>{item.name}</a>
              ))}
            </div>
          </div>
        </details>
      </div>
      <div class="nav-dropdown">
        <details>
          <summary class="nav-trigger">List of Words</summary>
          <div class="nav-panel">
            <h3>List of Words</h3>
            <div class="grid-1">
              {wordLists.map((item) => (
                <a href={item.href}>{item.name}</a>
              ))}
            </div>
          </div>
        </details>
      </div>
      <div class="nav-dropdown">
        <details>
          <summary class="nav-trigger">Words by Length</summary>
          <div class="nav-panel">
            <h3>Words by Length</h3>
            <div class="grid-2">
              {wordsByLength.map((item) => (
                <a href={item.href}>{item.name}</a>
              ))}
            </div>
          </div>
        </details>
      </div>
      <div class="nav-dropdown">
        <details>
          <summary class="nav-trigger">Daily Game Hints</summary>
          <div class="nav-panel">
            <h3>Daily Game Hints</h3>
            <div class="grid-1">
              {dailyGameHints.map((item) => (
                <a href={item.href}>{item.name}</a>
              ))}
            </div>
          </div>
        </details>
      </div>
      <a href="/about" class="nav-trigger">About</a>
    </nav>

    <div class="header-actions flex items-center gap-2 shrink-0">
      <button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle dark or light theme" title="Toggle dark/light mode">
        <span id="theme-icon-light" aria-hidden="true" class="theme-icon"><svg class="size-5" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg></span>
        <span id="theme-icon-dark" aria-hidden="true" class="theme-icon hidden"><svg class="size-5" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg></span>
      </button>
      <button type="button" class="nav-mobile-btn lg:hidden" id="mobile-menu-btn" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-drawer">
        <span aria-hidden="true"><svg class="size-6" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></span>
      </button>
    </div>
  </div>

  <div class="mobile-drawer" id="mobile-drawer" aria-hidden="true">
    <h3>WORD FINDERS</h3>
    <div class="grid gap-2" style="grid-template-columns: repeat(2, 1fr);">
      {wordFinders.map((item) => (
        <a href={item.href} data-close-drawer>{item.name.replace(' Solver', '').replace(' Finder', '')}</a>
      ))}
    </div>
    <h3>DAILY GAME HINTS</h3>
    <div class="grid gap-2" style="grid-template-columns: repeat(2, 1fr);">
      {dailyGameHints.map((item) => (
        <a href={item.href} data-close-drawer>{item.name}</a>
      ))}
    </div>
    <h3>LIST OF WORDS</h3>
    <div class="flex flex-col gap-2">
      {wordLists.map((item) => (
        <a href={item.href} data-close-drawer>{item.name}</a>
      ))}
    </div>
    <h3>WORDS BY LENGTH</h3>
    <div class="grid gap-2" style="grid-template-columns: repeat(3, 1fr);">
      {wordsByLength.map((item) => (
        <a href={item.href} data-close-drawer>{item.name.replace(' Words', '')}</a>
      ))}
    </div>
    <a href="/about" class="block mt-4 pt-4 border-t border-border font-semibold text-foreground" data-close-drawer>About</a>
  </div>
  <div class="mobile-drawer-overlay" id="mobile-drawer-overlay" aria-hidden="true"></div>
</header>

<script>
  (function () {
    const themeKey = 'word-unscrambler-theme';
    const root = document.documentElement;
    function setTheme(dark) {
      if (dark) {
        root.classList.add('dark');
        root.setAttribute('data-theme', 'dark');
      } else {
        root.classList.remove('dark');
        root.setAttribute('data-theme', 'light');
      }
      try { localStorage.setItem(themeKey, dark ? 'dark' : 'light'); } catch {}
      const lightEl = document.getElementById('theme-icon-light');
      const darkEl = document.getElementById('theme-icon-dark');
      if (lightEl) lightEl.classList.toggle('hidden', dark);
      if (darkEl) darkEl.classList.toggle('hidden', !dark);
    }
    const stored = typeof localStorage !== 'undefined' ? localStorage.getItem(themeKey) : null;
    const prefersDark = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    setTheme(stored === 'dark' || (!stored && prefersDark));
    document.getElementById('theme-toggle')?.addEventListener('click', () => {
      setTheme(!root.classList.contains('dark'));
    });
    const drawer = document.getElementById('mobile-drawer');
    const overlay = document.getElementById('mobile-drawer-overlay');
    function openDrawer() {
      drawer?.classList.add('open');
      drawer?.setAttribute('aria-hidden', 'false');
      overlay?.classList.add('is-open');
    }
    function closeDrawer() {
      drawer?.classList.remove('open');
      drawer?.setAttribute('aria-hidden', 'true');
      overlay?.classList.remove('is-open');
    }
    const menuBtn = document.getElementById('mobile-menu-btn');
    menuBtn?.addEventListener('click', () => {
      const open = drawer?.classList.contains('open');
      if (open) closeDrawer(); else openDrawer();
      menuBtn.setAttribute('aria-expanded', String(!open));
    });
    overlay?.addEventListener('click', () => { closeDrawer(); menuBtn?.setAttribute('aria-expanded', 'false'); });
    drawer?.querySelectorAll('[data-close-drawer]').forEach(el => el.addEventListener('click', () => { closeDrawer(); menuBtn?.setAttribute('aria-expanded', 'false'); }));
  })();
</script>
